cc_library(
    name = "consts",
    hdrs = ["boe.consts.hpp"],
    visibility = ["//visibility:public"],
)

cc_library(
    name = "lib",
    hdrs = [
        "boe.global.hpp",
        "boe.consts.hpp",
    ],
)

cc_library(
    name = "dlgutil",
    hdrs = ["boe.dlgutil.hpp"],
    srcs = ["boe.dlgutil.cpp"],
    deps = [
        ":lib",
        "//src/dialogxml/dialogs:choicedlog",
        "//src/dialogxml/dialogs:strdlog",
        "//src/dialogxml/widgets",
        "//src/fileio",
        "//src/fileio/resmgr:res_strings",
        "//src:sounds",
        "//src/tools:cursors",
        "//src/tools:enum_map",
        "//src/tools:prefs",
        "//src/tools:winutil",
        "//src/util",
        "//src/util:mathutil",
        "//src/universe",
    ],
    visibility = ["//visibility:public"],
)

cc_library(
    name = "locutils",
    hdrs = ["boe.locutils.hpp"],
    srcs = ["boe.locutils.cpp"],
    deps = [
        ":lib",
        "//src:types",
        "//src/universe",
        "//src/util:mathutil",
    ],
    visibility = ["//visibility:public"],
)

cc_binary(
    name = "boe",
    srcs = [
	    "boe.main.cpp",
	    "boe.startup.cpp",
        "boe.actions.cpp",
        "boe.actions.hpp",
        "boe.combat.cpp",
        "boe.combat.hpp",
        "boe.dlgutil.cpp",
        "boe.dlgutil.hpp",
        "boe.fileio.cpp",
        "boe.fileio.hpp",
        "boe.graphics.cpp",
        "boe.graphics.hpp",
        "boe.graphutil.cpp",
        "boe.graphutil.hpp",
        "boe.infodlg.cpp",
        "boe.infodlg.hpp",
        "boe.main.hpp",
        "boe.monster.cpp",
        "boe.monster.hpp",
        "boe.newgraph.cpp",
        "boe.newgraph.hpp",
        "boe.specials.cpp",
        "boe.specials.hpp",
        "boe.text.cpp",
        "boe.text.hpp",
        "boe.town.cpp",
        "boe.town.hpp",
        "boe.townspec.cpp",
        "boe.townspec.hpp",
        "boe.party.cpp",
        "boe.party.hpp",
        "boe.items.cpp",
        "boe.items.hpp",
        "boe.ui.cpp",
        "boe.ui.hpp",
        # TODO(bazel): Define platform targets and use select() here.
        "boe.menus.linux.cpp",
        "boe.menus.hpp",
        "boe.menu.cpp",
        "boe.menu.hpp",
	    # "../fileio/fileio_party.cpp",
	    # "../view_dialogs.cpp",
    ],
    deps = [
        ":lib",
        ":locutils",
        "//src:view_dialogs",
        "//src/dialogxml/dialogs:3choice",
        "//src/dialogxml/dialogs:choicedlog",
        "//src/dialogxml/dialogs:pictchoice",
        "//src/dialogxml/dialogs:strdlog",
        "//src/fileio",
        "//src/tools:drawable_manager",
        "//src/tools:edit_stuff_done",
        "//src/tools:enum_map",
        "//src/universe",
        "//src/util:mathutil",
    ],
    data = [
        "//rsrc/dialogs",
    ],
    linkopts = [
        "-L/usr/local/lib",
        "-lboost_filesystem",
        "-lboost_system",
        "-lsfml-audio",
        "-lsfml-graphics",
        "-lsfml-system",
        "-lsfml-window",
        "-ltgui",
        "-lX11",
        "-lGL",
    ],
    copts = ["-std=c++17"],
)
